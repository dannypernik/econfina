{% extends "base.html" %}

{% block content %}
  <div class="row justify-content-center">
    <div class="col-12 col-md-9">
      <h1>Add student</h1>
      <form id="add-student-form" action="" method="post">
        {{ form.hidden_tag() }}
        {{ form.student_name }}
        {{ form.last_name }}
        {{ form.student_email }}
        {{ form.parent_name }}
        {{ form.parent_email }}
        {{ form.timezone }}
        {{ form.location }}
        {{ form.status(class="my-2") }}
        {{ form.submit }}
      </form>
      {% for status in statuses %}
          <h1 class="mt-3">{{ status[0].title() }} students</h1>

          {% for s in students %}
            {% if s.status == status[0] %}
              <div class="row justify-content-centered">
                <div class="col-9 col-md-10">
                  <h2 class="my-1">{{ s.student_name }} {{ s.last_name }}</h2>

                  {% if status[0] == 'active' %}
                      <ul class="mb-3">
                        <li>{{ s.student_email }}</li>
                        <li>Parent: {{ s.parent_name }} ({{ s.parent_email }})</li>
                        <li>Timezone:
                          {% if s.timezone == -2 %}
                              Pacific
                            {% elif s.timezone == -1 %}
                                Mountain
                            {% elif s.timezone == 0 %}
                                Central
                            {% elif s.timezone == 1 %}
                                Eastern
                            {% else %}
                                {{ s.timezone }}
                          {% endif %}
                        </li>
                        <li>Location: {{ s.location }}</li>
                      </ul>
                  {% endif %}
                </div>

                <div class="col-3 col-md-2 text-end">
                  <a class="edit btn sec" href="{{ url_for('edit_student', id=s.id) }}">
                    Edit
                  </a>
                </div>
            </div>
          {% endif %}
        {% endfor %}
      {% endfor %}
    </div>
  </div>
{% endblock content %}
